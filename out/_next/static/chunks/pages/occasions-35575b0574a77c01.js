(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[234],{76645:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var r=n(67294),a=n(76116),i=n(45416),c=n(79420),o=n(3084),s=n(2186),l=n(63979),u=n(6814),d=n(24320),f=n(84450),h={Card:"Polaris-Card",subdued:"Polaris-Card--subdued","Section-hideOnPrint":"Polaris-Card__Section--hideOnPrint",hideOnPrint:"Polaris-Card--hideOnPrint",Header:"Polaris-Card__Header",Section:"Polaris-Card__Section","Section-fullWidth":"Polaris-Card__Section--fullWidth","Section-flush":"Polaris-Card__Section--flush","Section-subdued":"Polaris-Card__Section--subdued",SectionHeader:"Polaris-Card__SectionHeader",Subsection:"Polaris-Card__Subsection",Footer:"Polaris-Card__Footer",LeftJustified:"Polaris-Card__LeftJustified"},m=n(30475),v={Heading:"Polaris-Heading"};function p({element:e="h2",children:t}){return r.createElement(e,{className:v.Heading},t)}function b({children:e,title:t,actions:n}){const a=n?r.createElement(f.h,null,(0,l.B)(n,{plain:!0})):null,i=(0,r.isValidElement)(t)?t:r.createElement(p,null,t),c=a||e?r.createElement(m.K,{alignment:"baseline"},r.createElement(m.K.Item,{fill:!0},i),a,e):i;return r.createElement("div",{className:h.Header},c)}var O={Subheading:"Polaris-Subheading"};function g({element:e="h3",children:t}){const n="string"===typeof t?t:void 0;return r.createElement(e,{"aria-label":n,className:O.Subheading},t)}function y({children:e,title:t,subdued:n,flush:a,fullWidth:c,actions:o,hideOnPrint:s}){const u=(0,i.A)(h.Section,a&&h["Section-flush"],n&&h["Section-subdued"],c&&h["Section-fullWidth"],s&&h["Section-hideOnPrint"]),d=o?r.createElement(f.h,null,(0,l.B)(o,{plain:!0})):null,v="string"===typeof t?r.createElement(g,null,t):t,p=v||d?r.createElement("div",{className:h.SectionHeader},d?r.createElement(m.K,{alignment:"baseline"},r.createElement(m.K.Item,{fill:!0},v),d):v):null;return r.createElement("div",{className:u},p,e)}const P=function({children:e,hideOnPrint:t,title:n,subdued:m,sectioned:v,actions:p,primaryFooterAction:O,secondaryFooterActions:g,secondaryFooterActionsDisclosureText:P,footerActionAlignment:_="right"}){const E=(0,a.Q)(),{value:S,toggle:x}=(0,u.O)(!1),T=(0,i.A)(h.Card,m&&h.subdued,t&&h.hideOnPrint),C=n||p?r.createElement(b,{actions:p,title:n}):null,w=v?r.createElement(y,null,e):e,k=O?(0,l.h)(O,{primary:!0}):null;let j=null;g&&g.length&&(j=1===g.length?(0,l.h)(g[0]):r.createElement(r.Fragment,null,r.createElement(c.J,{active:S,activator:r.createElement(s.z,{disclosure:!0,onClick:x},P||E.translate("Polaris.Common.more")),onClose:x},r.createElement(o.S,{items:g}))));const N=k||j?r.createElement("div",{className:(0,i.A)(h.Footer,"left"===_&&h.LeftJustified)},"right"===_?r.createElement(f.h,null,j,k):r.createElement(f.h,null,k,j)):null;return r.createElement(d.O.Provider,{value:!0},r.createElement("div",{className:T},C,w,N))};P.Header=b,P.Section=y,P.Subsection=function({children:e}){return r.createElement("div",{className:h.Subsection},e)}},50116:function(e,t,n){"use strict";n.d(t,{V:function(){return d}});var r,a=n(67294),i=n(76116),c=n(45416),o=n(46290),s=n(14738),l={Tag:"Polaris-Tag",disabled:"Polaris-Tag--disabled",removable:"Polaris-Tag--removable",clickable:"Polaris-Tag--clickable",TagText:"Polaris-Tag__TagText",Button:"Polaris-Tag__Button"},u=a.createElement(s.J,{source:function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),r||(r=a.createElement("path",{d:"m11.414 10 4.293-4.293a.999.999 0 1 0-1.414-1.414L10 8.586 5.707 4.293a.999.999 0 1 0-1.414 1.414L8.586 10l-4.293 4.293a.999.999 0 1 0 1.414 1.414L10 11.414l4.293 4.293a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414L11.414 10z"})))}});function d({children:e,disabled:t=!1,onClick:n,onRemove:r}){const s=(0,i.Q)(),d=(0,c.A)(l.Tag,t&&l.disabled,n&&l.clickable,r&&l.removable),f=s.translate("Polaris.Tag.ariaLabel",{children:e||""}),h=r?a.createElement("button",{type:"button","aria-label":f,className:l.Button,onClick:r,onMouseUp:o.i8,disabled:t},u):null;return n?a.createElement("button",{type:"button",disabled:t,className:d,onClick:n},e):a.createElement("span",{className:d},a.createElement("span",{title:e,className:l.TagText},e),h)}},21748:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/occasions",function(){return n(54148)}])},75864:function(e,t,n){"use strict";var r=new(n(34675).Z);t.Z={fetchAll:function(){return r.request.get("/occasions")},update:function(e){return r.request.post("/occasions",{occasions:e})}}},54148:function(e,t,n){"use strict";n.r(t);var r=n(34051),a=n.n(r),i=n(85893),c=n(67294),o=n(30475),s=n(50116),l=n(5602),u=n(76645),d=n(63318),f=n(2186),h=(n(11163),n(75864));function m(e,t,n,r,a,i,c){try{var o=e[i](c),s=o.value}catch(l){return void n(l)}o.done?t(s):Promise.resolve(s).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){m(i,r,a,c,o,"next",e)}function o(e){m(i,r,a,c,o,"throw",e)}c(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function y(e,t){return!t||"object"!==_(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}var _=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(m,e);var t,n,r,c=E(m);function m(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(e=c.call(this)).state={occasionTextField:null,allOccasions:[],fetchingOccasions:!1},e}return t=m,(n=[{key:"componentDidMount",value:function(){var e=this;return v(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOccasions();case 2:case"end":return t.stop()}}),t)})))()}},{key:"fetchOccasions",value:function(){var e=this;return v(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({fetchingOccasions:!0}),t.prev=1,t.next=4,h.Z.fetchAll();case 4:n=t.sent,r=n.data.payload,e.setState({allOccasions:r.occasions}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:return t.prev=12,e.setState({fetchingOccasions:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()}},{key:"handleOccasionFieldChange",value:function(e){this.setState((function(t){return g({},t,{occasionTextField:e})}))}},{key:"addOccasion",value:function(){var e=this.state,t=e.occasionTextField,n=e.allOccasions;this.setState((function(e){return g({},e,{occasionTextField:t})})),n.push(t),this.saveOccasions(),this.setState({occasionTextField:null})}},{key:"handleRemoveOccasion",value:function(e,t){var n=this.state,r=(n.occasionTextField,n.allOccasions),a=r.indexOf(t);-1!==a&&(r.splice(a,1),this.setState({allOccasions:r})),this.saveOccasions()}},{key:"saveOccasions",value:function(){var e=this;return v(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.allOccasions,t.prev=1,t.next=4,h.Z.update(n);case 4:t.sent.data.payload,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Error at Saving occasion",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},{key:"renderOccasionTags",value:function(){var e=this,t=this.state.allOccasions;return(0,i.jsx)(o.K,{spacing:"tight",children:t.map((function(t,n){var r=e;return(0,i.jsx)(s.V,{onRemove:function(e){return r.handleRemoveOccasion(e,t)},children:t},t)}))})}},{key:"render",value:function(){var e=this.state.occasionTextField;return(0,i.jsx)(l.T,{title:"Occasions",separator:!0,children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(u.Z.Header,{}),(0,i.jsxs)(u.Z.Section,{children:[this.renderOccasionTags(),(0,i.jsx)("div",{style:{marginTop:20,marginBottom:20},children:(0,i.jsx)(d.n,{label:"Occasion",type:"email",value:e,onChange:this.handleOccasionFieldChange.bind(this)})}),(0,i.jsx)(f.z,{primary:!0,onClick:this.addOccasion.bind(this),children:" Add Occasion "})]})]})})}}])&&p(t.prototype,n),r&&p(t,r),m}(c.Component);t.default=S}},function(e){e.O(0,[602,318,774,888,179],(function(){return t=21748,e(e.s=t);var t}));var t=e.O();_N_E=t}]);