(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{76645:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(67294),r=n(76116),a=n(45416),o=n(79420),s=n(3084),c=n(2186),u=n(63979),l=n(6814),d=n(24320),f=n(84450),h={Card:"Polaris-Card",subdued:"Polaris-Card--subdued","Section-hideOnPrint":"Polaris-Card__Section--hideOnPrint",hideOnPrint:"Polaris-Card--hideOnPrint",Header:"Polaris-Card__Header",Section:"Polaris-Card__Section","Section-fullWidth":"Polaris-Card__Section--fullWidth","Section-flush":"Polaris-Card__Section--flush","Section-subdued":"Polaris-Card__Section--subdued",SectionHeader:"Polaris-Card__SectionHeader",Subsection:"Polaris-Card__Subsection",Footer:"Polaris-Card__Footer",LeftJustified:"Polaris-Card__LeftJustified"},p=n(30475),v={Heading:"Polaris-Heading"};function g({element:e="h2",children:t}){return i.createElement(e,{className:v.Heading},t)}function m({children:e,title:t,actions:n}){const r=n?i.createElement(f.h,null,(0,u.B)(n,{plain:!0})):null,a=(0,i.isValidElement)(t)?t:i.createElement(g,null,t),o=r||e?i.createElement(p.K,{alignment:"baseline"},i.createElement(p.K.Item,{fill:!0},a),r,e):a;return i.createElement("div",{className:h.Header},o)}var y={Subheading:"Polaris-Subheading"};function b({element:e="h3",children:t}){const n="string"===typeof t?t:void 0;return i.createElement(e,{"aria-label":n,className:y.Subheading},t)}function S({children:e,title:t,subdued:n,flush:r,fullWidth:o,actions:s,hideOnPrint:c}){const l=(0,a.A)(h.Section,r&&h["Section-flush"],n&&h["Section-subdued"],o&&h["Section-fullWidth"],c&&h["Section-hideOnPrint"]),d=s?i.createElement(f.h,null,(0,u.B)(s,{plain:!0})):null,v="string"===typeof t?i.createElement(b,null,t):t,g=v||d?i.createElement("div",{className:h.SectionHeader},d?i.createElement(p.K,{alignment:"baseline"},i.createElement(p.K.Item,{fill:!0},v),d):v):null;return i.createElement("div",{className:l},g,e)}const x=function({children:e,hideOnPrint:t,title:n,subdued:p,sectioned:v,actions:g,primaryFooterAction:y,secondaryFooterActions:b,secondaryFooterActionsDisclosureText:x,footerActionAlignment:E="right"}){const C=(0,r.Q)(),{value:T,toggle:_}=(0,l.O)(!1),P=(0,a.A)(h.Card,p&&h.subdued,t&&h.hideOnPrint),w=n||g?i.createElement(m,{actions:g,title:n}):null,D=v?i.createElement(S,null,e):e,j=y?(0,u.h)(y,{primary:!0}):null;let A=null;b&&b.length&&(A=1===b.length?(0,u.h)(b[0]):i.createElement(i.Fragment,null,i.createElement(o.J,{active:T,activator:i.createElement(c.z,{disclosure:!0,onClick:_},x||C.translate("Polaris.Common.more")),onClose:_},i.createElement(s.S,{items:b}))));const O=j||A?i.createElement("div",{className:(0,a.A)(h.Footer,"left"===E&&h.LeftJustified)},"right"===E?i.createElement(f.h,null,A,j):i.createElement(f.h,null,j,A)):null;return i.createElement(d.O.Provider,{value:!0},i.createElement("div",{className:P},w,D,O))};x.Header=m,x.Section=S,x.Subsection=function({children:e}){return i.createElement("div",{className:h.Subsection},e)}},49110:function(e,t,n){"use strict";n.d(t,{F:function(){return c}});var i=n(67294),r=n(40115),a=n(10929),o=n(4275),s=n(45426);const c=(0,i.memo)((function(e){const t=(0,a.L)("Toast"),{showToast:n,hideToast:c}=function(){const e=(0,i.useContext)(s.l);if(!e)throw new Error("No Frame context was provided. Your component must be wrapped in a <Frame> component. See https://polaris.shopify.com/components/structure/frame for implementation instructions.");return e}();return(0,o.H)((()=>(n((0,r.Zj)({id:t},e)),()=>{c({id:t})})),[e]),null}))},33733:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return n(31924)}])},75864:function(e,t,n){"use strict";var i=new(n(34675).Z);t.Z={fetchAll:function(){return i.request.get("/occasions")},update:function(e){return i.request.post("/occasions",{occasions:e})}}},31924:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var i=n(34051),r=n.n(i),a=n(85893),o=n(67294),s=n(63979),c=n(76645),u={SettingAction:"Polaris-SettingAction",Setting:"Polaris-SettingAction__Setting",Action:"Polaris-SettingAction__Action"};function l({action:e,children:t}){return o.createElement("div",{className:u.SettingAction},o.createElement("div",{className:u.Setting},t),o.createElement("div",{className:u.Action},e))}function d({enabled:e,action:t,children:n}){const i=t?(0,s.h)(t,{primary:!e}):null;return o.createElement(c.Z,{sectioned:!0},o.createElement(l,{action:i},n))}var f=n(49110),h=n(5602),p=n(81143),v=n(63318),g=n(2186),m=(n(11163),new(n(34675).Z)),y=function(){return m.request.get("/settings")},b=function(e){return m.request.post("/settings",e)};n(75864);function S(e,t,n,i,r,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(i,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){S(a,i,r,o,s,"next",e)}function s(e){S(a,i,r,o,s,"throw",e)}o(void 0)}))}}function E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){C(e,t,n[t])}))}return e}function P(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}var D=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=T(e);if(t){var r=T(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return P(this,n)}}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(s,e);var t,n,i,o=j(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=o.call(this)).state={settings:{appEnabled:!0,couponCode:"",deliveryHeading:"",deliveryText:"",discountText:"",minDate:0,futureDateActive:!1},pageIsReady:!1,showToast:!1},e}return t=s,n=[{key:"componentDidMount",value:function(){var e=this;return x(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchSettings();case 2:case"end":return t.stop()}}),t)})))()}},{key:"toggleToast",value:function(){this.setState({showToast:!this.state.showToast})}},{key:"fetchSettings",value:function(){var e=this;return x(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y();case 3:if(n=t.sent,i=n.data.payload){t.next=7;break}return t.abrupt("return");case 7:e.setState((function(e){return{settings:_({},e.settings,{appEnabled:i.appEnabled,couponCode:i.couponCode,deliveryText:i.deliveryText,discountText:i.discountText,deliveryHeading:i.deliveryHeading,minDate:i.minDate,futureDateActive:i.futureDateActive})}})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},{key:"handleCouponChange",value:function(e){this.setState((function(t){return{settings:_({},t.settings,{couponCode:e})}}))}},{key:"handleDiscountTextChange",value:function(e){this.setState((function(t){return{settings:_({},t.settings,{discountText:e})}}))}},{key:"handleMinDateChange",value:function(e){this.setState((function(t){return{settings:_({},t.settings,{minDate:e})}}))}},{key:"handleDeliveryHeadingChange",value:function(e){this.setState((function(t){return{settings:_({},t.settings,{deliveryHeading:e})}}))}},{key:"handleDeliveryChange",value:function(e){this.setState((function(t){return{settings:_({},t.settings,{deliveryText:e})}}))}},{key:"handleFutureDateToggle",value:function(e){var t=this;this.setState((function(e){return{settings:_({},e.settings,{futureDateActive:!t.state.settings.futureDateActive})}}))}},{key:"handleAppEnabledToggle",value:function(e){var t=this;this.setState((function(e){return{settings:_({},e.settings,{appEnabled:!t.state.settings.appEnabled})}}))}},{key:"renderToast",value:function(){if(this.state.showToast){var e=this;return(0,a.jsx)(f.F,{content:"Settings saved",duration:"2000",onDismiss:function(){return e.toggleToast()}})}return""}},{key:"render",value:function(){var e=this,t=this.state,n=t.settings,i=(t.pageIsReady,n.futureDateActive?"Deactivate":"Activate"),r=n.futureDateActive?"activated":"deactivated",o=n.appEnabled?"Disable":"Enable";return(0,a.jsxs)(h.T,{title:"Settings",separator:!0,children:[(0,a.jsx)("div",{style:{marginTop:"0px"},children:(0,a.jsxs)(d,{action:{content:o,onAction:function(t){return e.handleAppEnabledToggle(t)}},enabled:n.appEnabled,children:["App is"," ",(0,a.jsx)(p.p,{variation:"strong",children:n.appEnabled?"Enabled":"Disabled"}),"."]})}),(0,a.jsx)("div",{style:{marginTop:"10px"},children:(0,a.jsx)(v.n,{label:"Discount Code",value:n.couponCode,onChange:function(t){e.handleCouponChange(t)},helpText:"Copy here the discount code created in Shopify's Discounts"})}),(0,a.jsx)("div",{style:{marginTop:"10px"},children:(0,a.jsx)(v.n,{label:"Discount Text",value:n.discountText,onChange:function(t){e.handleDiscountTextChange(t)}})}),(0,a.jsx)("div",{style:{marginTop:"10px"},children:(0,a.jsx)(v.n,{label:"Delivery Heading",value:n.deliveryHeading,onChange:function(t){e.handleDeliveryHeadingChange(t)}})}),(0,a.jsx)("div",{style:{marginTop:"10px"},children:(0,a.jsx)(v.n,{label:"Delivery Text",value:n.deliveryText,onChange:function(t){e.handleDeliveryChange(t)},multiline:4})}),(0,a.jsx)("div",{style:{marginTop:"10px"},children:(0,a.jsx)(v.n,{label:"First available delivery date",type:"number",value:n.minDate,onChange:function(t){e.handleMinDateChange(t)},multiline:1})}),(0,a.jsx)("div",{style:{marginTop:"10px"},children:(0,a.jsxs)(d,{action:{content:i,onAction:function(t){return e.handleFutureDateToggle(t)}},enabled:n.futureDateActive,children:["Future date is"," ",(0,a.jsx)(p.p,{variation:"strong",children:r}),"."]})}),(0,a.jsx)("div",{style:{marginTop:"10px"},children:(0,a.jsx)(g.z,{onClick:function(t){e.saveSettings(t)},primary:!0,children:"Save"})}),this.renderToast()]})}},{key:"saveSettings",value:function(){var e=this;return x(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.settings,t.prev=1,t.next=4,b(n);case 4:t.sent.data.payload,e.toggleToast(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("Error at Saving settings",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}],n&&E(t.prototype,n),i&&E(t,i),s}(o.Component),O=A}},function(e){e.O(0,[602,318,774,888,179],(function(){return t=33733,e(e.s=t);var t}));var t=e.O();_N_E=t}]);