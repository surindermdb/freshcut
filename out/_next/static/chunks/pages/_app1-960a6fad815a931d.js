(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{25357:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app1",function(){return n(16659)}])},16659:function(e,t,n){"use strict";n.r(t),n.d(t,{app:function(){return T}});var r=n(34051),o=n.n(r),c=n(85893),i=n(7544),a=n(92119),u=n(36980),s=n(46607),p=n(58923),f=n(1343),l=n.n(f),h=(n(51810),n(1994)),d=n(11163),v=n(65885),y=n(88759),b=n(46418),g=n(85052);function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n,r,o,c,i){try{var a=e[c](i),u=a.value}catch(s){return void n(s)}a.done?t(u):Promise.resolve(u).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function i(e){O(c,r,o,i,a,"next",e)}function a(e){O(c,r,o,i,a,"throw",e)}i(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}function j(e,t){return!t||"object"!==R(t)&&"function"!==typeof t?w(e):t}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}var R=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}var C=(new v.Z).get("shopOrigin"),T=l()({apiKey:"c565e74622748fad9d9351ddcd523f46",shopOrigin:C}),N=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(f,e);var t,n,r,i=E(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),_(w(e=i.call(this)),"redirectTo",(function(t){var n=l()({host:e.props.host,apiKey:"c565e74622748fad9d9351ddcd523f46",shopOrigin:e.state.shop});p.Redirect.create(n).dispatch(p.Redirect.Action.REMOTE,{url:"".concat(n.localOrigin,"/public/widget/").concat(t),newContext:!0})})),e.state={shop:null,prevState:null,appReady:!1,loadingPage:!1,shopError:null,fetchingShop:!1},e}return t=f,n=[{key:"componentDidMount",value:function(){var e=this;return m(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.props).Component,n.pageProps,t.prev=1,t.next=4,e.fetchShop();case 4:r=t.sent,e.setState({shop:r,appReady:!0}),e.setState({prevState:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.message);case 12:d.default.events.on("routeChangeStart",(function(){return e.setState({loadingPage:!0})})),d.default.events.on("routeChangeComplete",(function(){return e.setState({loadingPage:!1})})),d.default.events.on("routeChangeError",(function(){return console.log("err")}));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},{key:"fetchShop",value:function(){var e=this;return m(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=m(o().mark((function t(n,r){var c,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({fetchingShop:!0}),t.prev=1,t.next=4,y.Z.fetch();case 4:c=t.sent,i=c.data.payload,n(i),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(t.t0);case 13:return t.prev=13,e.setState({fetchingShop:!1}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()}},{key:"openNewTab",value:function(e){p.Redirect.create(T).dispatch(p.Redirect.Action.REMOTE,{url:e,newContext:!0})}},{key:"renderApp",value:function(){var e=this.props.Component,t=this.state,n=t.shop;return t.fetchingShop||!n?(0,c.jsx)(b.Z,{}):(0,c.jsx)(a.R,{navigation:(0,c.jsx)(g.Z,{}),children:(0,c.jsx)(e,S({apiKey:"c565e74622748fad9d9351ddcd523f46",Component:e,openNewTab:this.openNewTab.bind(this),redirectTo:this.redirectTo.bind(this),shopOrigin:C,shop:"aj-development-otm.myshopify.com"},this.props.pageProps))})}},{key:"render",value:function(){var e=this.props,t=(e.Component,e.pageProps,e.shopOrigin);return e.host,(0,c.jsx)(u.w,{i18n:h,children:(0,c.jsx)(s.Provider,{config:{apiKey:"c565e74622748fad9d9351ddcd523f46",shopOrigin:t,forceRedirect:!0},children:this.renderApp()})})}}],n&&P(t.prototype,n),r&&P(t,r),f}(i.default);N.getInitialProps=function(){var e=m(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ctx,e.abrupt("return",{shopOrigin:n.query.shop,host:n.query.host});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=N}},function(e){e.O(0,[774,888,179],(function(){return t=25357,e(e.s=t);var t}));var t=e.O();_N_E=t}]);