(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[728],{4854:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cards",function(){return n(88034)}])},88034:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r,a=n(34051),o=n.n(a),c=n(85893),i=n(67294),s=n(5602),u=n(62850),l=n(76645),f=n(2186),d=n(11163),p=n(73550),h=n(62859),m=n(76116),v=n(45416),g=function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),r||(r=i.createElement("path",{d:"M14 13v1a1 1 0 0 1-1 1H6c-.575 0-1-.484-1-1V7a1 1 0 0 1 1-1h1c1.037 0 1.04 1.5 0 1.5-.178.005-.353 0-.5 0v6h6V13c0-1 1.5-1 1.5 0zm-3.75-7.25A.75.75 0 0 1 11 5h4v4a.75.75 0 0 1-1.5 0V7.56l-3.22 3.22a.75.75 0 1 1-1.06-1.06l3.22-3.22H11a.75.75 0 0 1-.75-.75z"})))},y=n(14738),b=n(67509);const x=(0,i.createContext)(!1);var w={Link:"Polaris-Link",IconLockup:"Polaris-Link__IconLockup",IconLayout:"Polaris-Link__IconLayout",monochrome:"Polaris-Link--monochrome",removeUnderline:"Polaris-Link--removeUnderline"};function k({url:e,children:t,onClick:n,external:r,id:a,monochrome:o,removeUnderline:c,accessibilityLabel:s}){const u=(0,m.Q)();let l=t;if(r&&"string"===typeof t){const e=u.translate("Polaris.Common.newWindowAccessibilityHint");l=i.createElement(i.Fragment,null,t,i.createElement("span",{className:w.IconLockup},i.createElement("span",{className:w.IconLayout},i.createElement(y.J,{accessibilityLabel:e,source:g}))))}return i.createElement(x.Consumer,null,(t=>{const u=o||t,f=(0,v.A)(w.Link,u&&w.monochrome,c&&w.removeUnderline);return e?i.createElement(b.H,{onClick:n,className:f,url:e,external:r,id:a,"aria-label":s},l):i.createElement("button",{type:"button",onClick:n,className:f,id:a,"aria-label":s},l)}))}var C=n(84450),_=n(13607),j=n(54954),P=n(643),E=n(34010),O=n(77862),L=function(e){var t=e.cards,n=e.onDelete,r=e.total,a=e.meta,o=e.onPageChange,s=(0,i.useState)([]),u=s[0],l=s[1];return(0,i.useEffect)((function(){var e=t.map((function(e){return[(0,c.jsx)(h.p,{source:e.image_url}),(0,c.jsx)(k,{onClick:function(){return d.default.push({pathname:"/cards/edit",query:{id:e._id,cardDesign:JSON.stringify(e)}})},children:e.title}),e.character_count,(0,c.jsxs)(C.h,{children:[(0,c.jsx)(_.u,{content:"Edit",children:(0,c.jsx)(f.z,{size:"slim",icon:E.S,plain:!0,onClick:function(){return d.default.push({pathname:"/cards/edit",query:{id:e._id,cardDesign:JSON.stringify(e)}})}})}),(0,c.jsx)(_.u,{content:"Remove",children:(0,c.jsx)(f.z,{size:"slim",icon:O.S,plain:!0,destructive:!0,onClick:function(){return t=e,void(!n||n(t));var t}})})]})]}));l(e)}),[t]),(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(j.w,{columnContentTypes:["text","text","text","text"],headings:["Image","Title","Max lines","Actions"],rows:u,sortable:[!1,!0,!1,!1],verticalAlign:"middle",footerContent:r?"Showing ".concat(t.length," of ").concat(r," results"):"Showing ".concat(t.length," results")}),(0,c.jsx)(P.t,{hasPrevious:"1"!=a.page,onPrevious:function(){o(parseInt(a.page)-1)},hasNext:a.pages!=parseInt(a.page),onNext:function(){o(parseInt(a.page)+1)}})]})};n(91900);function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(u){return void n(u)}i.done?t(s):Promise.resolve(s).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){N(o,r,a,c,i,"next",e)}function i(e){N(o,r,a,c,i,"throw",e)}c(void 0)}))}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function T(e,t){return!t||"object"!==H(t)&&"function"!==typeof t?S(e):t}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}var H=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var a=D(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T(this,n)}}var U=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(i,e);var t,n,r,a=Z(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=S(e=a.call(this));z(S(e),"handlePageChange",function(){var e=I(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchCards(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var n=S(e);return z(S(e),"handleCardRemove",function(){var e=I(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.Z.delete(t._id);case 3:n.setState({cards:n.state.cards.filter((function(e){return e._id!==t._id}))}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),e.state={cards:[],meta:null,currentPage:0,fetchingCards:!1,pageIsReady:!1},e}return t=i,n=[{key:"componentDidMount",value:function(){var e=this;return I(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCards();case 2:e.setState({pageIsReady:!0});case 3:case"end":return t.stop()}}),t)})))()}},{key:"fetchCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;return I(o().mark((function n(){var r,a,c,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==t.state.currentPage){n.next=2;break}return n.abrupt("return");case 2:return t.setState({fetchingCards:!0}),n.prev=3,n.next=6,p.Z.fetchAll(e);case 6:r=n.sent,a=r.data,c=a.payload,i=a.meta,t.setState({cards:c,meta:i,currentPage:e}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),console.log(n.t0);case 16:return n.prev=16,t.setState({fetchingCards:!1}),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[3,13,16,19]])})))()}},{key:"render",value:function(){var e=this,t=this.state,n=t.cards,r=t.meta;return t.pageIsReady?(0,c.jsx)(s.T,{title:"Card Designs",separator:!0,children:(0,c.jsxs)(l.Z,{children:[(0,c.jsx)(l.Z.Header,{children:(0,c.jsx)(f.z,{primary:!0,size:"slim",onClick:function(){return d.default.push({pathname:"/cards/create"})},children:"Create New Design"})}),(0,c.jsx)(l.Z.Section,{children:(0,c.jsx)(L,{cards:n,meta:r,total:"",onDelete:function(t){return e.handleCardRemove(t)},onPageChange:function(t){return e.handlePageChange(t)}})})]})}):(0,c.jsx)(s.T,{title:"Card Designs",separator:!0,children:(0,c.jsx)(u.$,{accessibilityLabel:"Loading Orders",size:"large"})})}}],n&&R(t.prototype,n),r&&R(t,r),i}(i.Component),B=U}},function(e){e.O(0,[602,318,79,900,774,888,179],(function(){return t=4854,e(e.s=t);var t}));var t=e.O();_N_E=t}]);