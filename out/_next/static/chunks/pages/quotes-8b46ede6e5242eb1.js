(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[249],{15568:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/quotes",function(){return n(75309)}])},75864:function(e,t,n){"use strict";var r=new(n(34675).Z);t.Z={fetchAll:function(){return r.request.get("/occasions")},update:function(e){return r.request.post("/occasions",{occasions:e})}}},84629:function(e,t,n){"use strict";var r=new(n(34675).Z);t.Z={fetchAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return r.request.get("/quotes?page=".concat(e))},fetchSingle:function(e){return r.request.get("/quotes/".concat(e))},save:function(e){return r.request.post("/quotes",e)},update:function(e,t){return r.request.patch("/quotes/".concat(e),t)},delete:function(e){return r.request.delete("/quotes/".concat(e))}}},75309:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r=n(34051),a=n.n(r),o=n(85893),i=n(67294),s=n(45416),c=n(54673),u=n(63979),l=n(24320),f=n(30475),p={TextContainer:"Polaris-TextContainer",spacingTight:"Polaris-TextContainer--spacingTight",spacingLoose:"Polaris-TextContainer--spacingLoose"};function h({spacing:e,children:t}){const n=(0,s.A)(p.TextContainer,e&&p[(0,s.O)("spacing",e)]);return i.createElement("div",{className:n},t)}var d=n(42125),m={EmptyState:"Polaris-EmptyState",Section:"Polaris-EmptyState__Section",Details:"Polaris-EmptyState__Details",Image:"Polaris-EmptyState__Image",ImageContainer:"Polaris-EmptyState__ImageContainer",DetailsContainer:"Polaris-EmptyState__DetailsContainer",withinContentContainer:"Polaris-EmptyState--withinContentContainer",Content:"Polaris-EmptyState__Content",imageContained:"Polaris-EmptyState--imageContained",fullWidth:"Polaris-EmptyState--fullWidth",Actions:"Polaris-EmptyState__Actions",FooterContent:"Polaris-EmptyState__FooterContent"};function g({children:e,heading:t,image:n,largeImage:r,imageContained:a,fullWidth:o=!1,action:p,secondaryAction:g,footerContent:v}){const y=(0,i.useContext)(l.O),C=(0,s.A)(m.EmptyState,o&&m.fullWidth,a&&m.imageContained,y&&m.withinContentContainer),x=r?i.createElement(c.E,{alt:"",role:"presentation",className:m.Image,source:r,sourceSet:[{source:n,descriptor:"568w"},{source:r,descriptor:"1136w"}],sizes:"(max-width: 568px) 60vw"}):i.createElement(c.E,{role:"presentation",alt:"",className:m.Image,source:n}),w=g?(0,u.h)(g,{}):null,E=v?i.createElement("div",{className:m.FooterContent},i.createElement(h,null,v)):null,_=y?"small":"medium",P=p?(0,u.h)(p,{primary:!0,size:"medium"}):null,b=t?i.createElement(d.R,{size:_},t):null,S=e?i.createElement("div",{className:m.Content},e):null,q=b||e?i.createElement(h,null,b,S):null,j=P||w?i.createElement("div",{className:m.Actions},i.createElement(f.K,{alignment:"center",distribution:"center",spacing:"tight"},P,w)):null,N=q||j||E?i.createElement("div",{className:m.DetailsContainer},i.createElement("div",{className:m.Details},q,j,E)):i.createElement("div",{className:m.DetailsContainer});return i.createElement("div",{className:C},i.createElement("div",{className:m.Section},N,i.createElement("div",{className:m.ImageContainer},x)))}var v=n(5602),y=n(62850),C=n(76645),x=n(2186),w=n(11163),E=n(84629),_=n(84450),P=n(13607),b=n(54954),S=n(643),q=n(34010),j=n(77862),N=function(e){var t=e.quotes,n=e.onDelete,r=e.total,a=e.meta,s=e.onPageChange,c=(0,i.useState)([]),u=c[0],l=c[1];return(0,i.useEffect)((function(){var e=t.map((function(e){var t=e.quote;return t.length>50&&(t=t.substring(0,50)+"..."),[e.occasion,t,(0,o.jsxs)(_.h,{children:[(0,o.jsx)(P.u,{content:"Edit",children:(0,o.jsx)(x.z,{size:"slim",icon:q.S,plain:!0,onClick:function(){return w.default.push({pathname:"/quotes/edit",query:{id:"quote._id",quote:JSON.stringify(e)}})}})}),(0,o.jsx)(P.u,{content:"Remove",children:(0,o.jsx)(x.z,{size:"slim",icon:j.S,plain:!0,destructive:!0,onClick:function(){return t=e,void(!n||n(t));var t}})})]})]}));l(e)}),[t]),(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(b.w,{columnContentTypes:["text","text","text"],headings:["Occasion","Quote","Actions"],rows:u,sortable:[!0,!1],verticalAlign:"middle",footerContent:r?"Showing ".concat(t.length," of ").concat(r," results"):"Showing ".concat(t.length," results")}),(0,o.jsx)(S.t,{hasPrevious:"1"!=a.page,onPrevious:function(){s(parseInt(a.page)-1)},hasNext:a.pages!=parseInt(a.page),onNext:function(){s(parseInt(a.page)+1)}})]})};n(75864);function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){O(o,r,a,i,s,"next",e)}function s(e){O(o,r,a,i,s,"throw",e)}i(void 0)}))}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function R(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?k(e):t}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}var D=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var a=Q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R(this,n)}}var F=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(s,e);var t,n,r,i=Z(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=k(e=i.call(this));A(k(e),"handlePageChange",function(){var e=I(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchQuotes(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var n=k(e);return A(k(e),"handleQuoteRemove",function(){var e=I(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.delete(t._id);case 3:n.setState({quotes:n.state.quotes.filter((function(e){return e._id!==t._id}))}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),e.state={quotes:[],meta:null,currentPage:0,fetchingQuotes:!1,pageIsReady:!1},e}return t=s,n=[{key:"componentDidMount",value:function(){var e=this;return I(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchQuotes();case 2:e.setState({pageIsReady:!0});case 3:case"end":return t.stop()}}),t)})))()}},{key:"fetchQuotes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;return I(a().mark((function n(){var r,o,i,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==t.state.currentPage){n.next=2;break}return n.abrupt("return");case 2:return t.setState({fetchingQuotes:!0}),n.prev=3,n.next=6,E.Z.fetchAll(e);case 6:r=n.sent,o=r.data,i=o.payload,s=o.meta,t.setState({quotes:i,meta:s,currentPage:e}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),console.log(n.t0);case 16:return n.prev=16,t.setState({fetchingQuotes:!1}),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[3,13,16,19]])})))()}},{key:"render",value:function(){var e=this,t=(this.props.shop,this.state),n=t.quotes,r=t.meta,a=t.pageIsReady;return n.length>0?a?(0,o.jsx)(v.T,{title:"Quotes",separator:!0,children:(0,o.jsxs)(C.Z,{children:[(0,o.jsx)(C.Z.Header,{children:(0,o.jsx)(x.z,{primary:!0,size:"slim",onClick:function(){return w.default.push({pathname:"/quotes/create"})},children:"Create New Quote"})}),(0,o.jsx)(C.Z.Section,{children:(0,o.jsx)(N,{quotes:n,total:"",meta:r,onDelete:function(t){return e.handleQuoteRemove(t)},onPageChange:function(t){return e.handlePageChange(t)}})})]})}):(0,o.jsx)(v.T,{title:"Quotes",separator:!0,children:(0,o.jsx)(y.$,{accessibilityLabel:"Loading Quotes",size:"large"})}):(0,o.jsx)(g,{heading:"You Haven't added any quotes",action:{content:"Create A New quote",onAction:function(){return w.default.push({pathname:"/quotes/create"})}},children:(0,o.jsx)("p",{children:"Here you will see all quotes which you have created"})})}}],n&&T(t.prototype,n),r&&T(t,r),s}(i.Component),L=F}},function(e){e.O(0,[602,79,774,888,179],(function(){return t=15568,e(e.s=t);var t}));var t=e.O();_N_E=t}]);