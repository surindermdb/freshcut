"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{9734:function(e,t,n){n.d(t,{l:function(){return s}});var r=n(67294),a=n(45241),o={FormLayout:"Polaris-FormLayout",Title:"Polaris-FormLayout__Title",Items:"Polaris-FormLayout__Items",HelpText:"Polaris-FormLayout__HelpText",Item:"Polaris-FormLayout__Item",grouped:"Polaris-FormLayout--grouped",condensed:"Polaris-FormLayout--condensed"};function c(e){return r.createElement("div",{className:o.Item},e.children)}var i=n(10929),u=n(45416);function l({children:e,condensed:t,title:n,helpText:l}){const s=(0,u.A)(t?o.condensed:o.grouped),d=(0,i.L)("FormLayoutGroup");let f,p,m=null,h=null;l&&(f=`${d}HelpText`,m=r.createElement("div",{id:f,className:o.HelpText},l)),n&&(p=`${d}Title`,h=r.createElement("div",{id:p,className:o.Title},n));const b=r.Children.map(e,(e=>(0,a.oh)(e,c,{})));return r.createElement("div",{role:"group",className:s,"aria-labelledby":p,"aria-describedby":f},h,r.createElement("div",{className:o.Items},b),m)}const s=(0,r.memo)((function({children:e}){return r.createElement("div",{className:o.FormLayout},r.Children.map(e,d))}));function d(e,t){if((0,a.Mc)(e,l))return e;const n={key:t};return(0,a.oh)(e,c,n)}s.Group=l},99224:function(e,t,n){n.d(t,{l:function(){return c}});var r=n(67294),a=n(76116),o=n(17114);function c({acceptCharset:e,action:t,autoComplete:n,children:c,encType:i,implicitSubmit:u=!0,method:l="post",name:s,noValidate:d,preventDefault:f=!0,target:p,onSubmit:m}){const h=(0,a.Q)(),b=(0,r.useCallback)((e=>{f&&(e.preventDefault(),m(e))}),[m,f]),v=function(e){if(null==e)return e;return e?"on":"off"}(n),y=u?r.createElement(o.T,null,r.createElement("button",{type:"submit","aria-hidden":"true",tabIndex:-1},h.translate("Polaris.Common.submit"))):null;return r.createElement("form",{acceptCharset:e,action:t,autoComplete:v,encType:i,method:l,name:s,noValidate:d,target:p,onSubmit:b},c,y)}},80320:function(e,t,n){n.d(t,{Q:function(){return u}});var r=n(67294),a=n(63979),o=n(84450),c=n(30475),i={PageActions:"Polaris-PageActions"};function u({primaryAction:e,secondaryActions:t}){const n=e?(0,a.B)(e,{primary:!0}):null,u=t?r.createElement(o.h,null,(0,a.B)(t)):null,l=u?"equalSpacing":"trailing";return r.createElement("div",{className:i.PageActions},r.createElement(c.K,{distribution:l,spacing:"tight"},u,n))}},85691:function(e,t,n){n.d(t,{P:function(){return f}});var r=n(67294),a=n(40115),o=n(10929),c=n(45416),i=n(27529),u=n(14738),l=n(29797),s={Select:"Polaris-Select",disabled:"Polaris-Select--disabled",Content:"Polaris-Select__Content",InlineLabel:"Polaris-Select__InlineLabel",Icon:"Polaris-Select__Icon",Backdrop:"Polaris-Select__Backdrop",placeholder:"Polaris-Select--placeholder",error:"Polaris-Select--error",Input:"Polaris-Select__Input",SelectedOption:"Polaris-Select__SelectedOption",Prefix:"Polaris-Select__Prefix",hover:"Polaris-Select--hover"};var d=r.createElement(u.J,{source:i.S});function f({options:e,label:t,labelAction:n,labelHidden:a,labelInline:i,disabled:u,helpText:f,placeholder:p,id:h,name:v,value:g="",error:x,onChange:P,onFocus:S,onBlur:C,requiredIndicator:E}){const _=(0,o.L)("Select",h),O=!!i||a,j=(0,c.A)(s.Select,x&&s.error,u&&s.disabled),k=P?e=>P(e.currentTarget.value,_):void 0,w=[];f&&w.push((0,l.Nh)(_)),x&&w.push(`${_}Error`);let T=(e||[]).map(b);p&&(T=[{label:p,value:"",disabled:!0},...T]);const I=i&&r.createElement("span",{className:s.InlineLabel},t),L=function(e,t){const n=function(e){let t=[];return e.forEach((e=>{m(e)?t=t.concat(e.options):t.push(e)})),t}(e);let r=n.find((e=>t===e.value));void 0===r&&(r=n.find((e=>!e.hidden)));return r||{value:"",label:""}}(T,g),N=L.prefix&&r.createElement("div",{className:s.Prefix},L.prefix),q=r.createElement("div",{className:s.Content,"aria-hidden":!0,"aria-disabled":u},I,N,r.createElement("span",{className:s.SelectedOption},L.label),r.createElement("span",{className:s.Icon},d)),A=T.map(y);return r.createElement(l.jN,{id:_,label:t,error:x,action:n,labelHidden:O,helpText:f,requiredIndicator:E},r.createElement("div",{className:j},r.createElement("select",{id:_,name:v,value:g,className:s.Input,disabled:u,onFocus:S,onBlur:C,onChange:k,"aria-invalid":Boolean(x),"aria-describedby":w.length?w.join(" "):void 0,"aria-required":E},A),q,r.createElement("div",{className:s.Backdrop})))}function p(e){return"string"===typeof e}function m(e){return"object"===typeof e&&"options"in e&&null!=e.options}function h(e){return{label:e,value:e}}function b(e){if(p(e))return h(e);if(m(e)){const{title:t,options:n}=e;return{title:t,options:n.map((e=>p(e)?h(e):e))}}return e}function v(e){const{value:t,label:n,prefix:o}=e,c=(0,a.Kd)(e,["value","label","prefix"]);return r.createElement("option",Object.assign({key:t,value:t},c),n)}function y(e){if(m(e)){const{title:t,options:n}=e;return r.createElement("optgroup",{label:t,key:t},n.map(v))}return v(e)}},62859:function(e,t,n){n.d(t,{p:function(){return u}});var r=n(67294),a=n(45416),o=n(54673),c=n(14738),i={Thumbnail:"Polaris-Thumbnail",sizeSmall:"Polaris-Thumbnail--sizeSmall",sizeMedium:"Polaris-Thumbnail--sizeMedium",sizeLarge:"Polaris-Thumbnail--sizeLarge"};function u({source:e,alt:t,size:n="medium"}){const u=(0,a.A)(i.Thumbnail,n&&i[(0,a.O)("size",n)]),l="string"===typeof e?r.createElement(o.E,{alt:t,source:e}):r.createElement(c.J,{accessibilityLabel:t,source:e});return r.createElement("span",{className:u},l)}},44187:function(e,t,n){var r=n(85893),a=n(99224),o=n(9734),c=n(63318),i=n(85691),u=n(67294),l=n(12e3);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}t.Z=function(e){var t=e.data,n=e.allOccasions,s=e.onUpdate,f=(0,u.useState)(t),p=f[0],m=f[1],h=(0,u.useState)(n),b=h[0],v=(h[1],(0,u.useCallback)((function(e){return m((function(t){return d({},t,{title:e})}))}),[])),y=(0,u.useCallback)((function(e){return m((function(t){return d({},t,{image_url:e})}))}),[]),g=(0,u.useCallback)((function(e){return m((function(t){return d({},t,{character_count:e})}))}),[]),x=(0,u.useCallback)((function(e){return m((function(t){return d({},t,{product_id:e})}))}),[]),P=(0,u.useCallback)((function(e){return m((function(t){return d({},t,{occasion:e})}))}),[]);(0,u.useCallback)((function(e){return setQuote((function(t){return d({},t,{quote:e})}))}),[]);return(0,u.useEffect)((function(){s({card:p})}),[p]),(0,r.jsx)("div",{children:(0,r.jsx)(a.l,{children:(0,r.jsxs)(o.l,{children:[(0,r.jsx)(c.n,{label:"Card Title",value:p.title,maxLength:25,helpText:"* Max 25 characters",showCharacterCount:!0,onChange:v}),(0,r.jsx)(i.P,{id:"occasion",label:"Occasion",placeholder:"Select",options:b,value:p.occasion,onChange:P}),(0,r.jsx)(c.n,{label:"Associated product ID",value:p.product_id,helpText:"Leave empty if this card is not associated with specific product",onChange:x}),(0,r.jsxs)(o.l.Group,{children:[(0,r.jsx)(l.Z,{src:p.image_url}),(0,r.jsx)(c.n,{label:"Image URL",value:p.image_url,helpText:'You can upload images using Shopify "Files" in "Setings -> Files" and copy URL',onChange:y})]}),(0,r.jsx)(c.n,{label:"Max Line Count",type:"number",value:p.character_count,onChange:g})]})})})}},12e3:function(e,t,n){var r=n(85893),a=n(62859),o=n(67294);t.Z=function(e){var t=e.src,n=(0,o.useState)(t),c=(n[0],n[1]);return(0,o.useEffect)((function(){c(t)}),[t]),(0,r.jsx)("div",{children:(0,r.jsx)(a.p,{source:t,size:"large"})})}},73550:function(e,t,n){var r=new(n(34675).Z);t.Z={fetchAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return r.request.get("/cards?page=".concat(e))},fetchSingle:function(e){return r.request.get("/cards/".concat(e))},save:function(e){return r.request.post("/cards",e)},update:function(e,t){return r.request.patch("/cards/".concat(e),t)},delete:function(e){return r.request.delete("/cards/".concat(e))}}},75864:function(e,t,n){var r=new(n(34675).Z);t.Z={fetchAll:function(){return r.request.get("/occasions")},update:function(e){return r.request.post("/occasions",{occasions:e})}}},91900:function(e,t,n){n.r(t);var r=n(34051),a=n.n(r),o=n(85893),c=n(67294),i=n(5602),u=n(76645),l=n(80320),s=n(11163),d=n(44187),f=n(73550),p=n(75864);function m(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(l){return void n(l)}i.done?t(u):Promise.resolve(u).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){m(o,r,a,c,i,"next",e)}function i(e){m(o,r,a,c,i,"throw",e)}c(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}var P=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(m,e);var t,n,r,c=S(m);function m(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(e=c.call(this)).state={currentCard:null,pageIsReady:!1,allOccasions:[]},e}return t=m,n=[{key:"componentDidMount",value:function(){var e=this;return h(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=s.default.query).id,r=n.cardDesign,t.next=3,e.fetchOccasions();case 3:e.setState({currentCard:JSON.parse(r),pageIsReady:!0});case 4:case"end":return t.stop()}}),t)})))()}},{key:"fetchOccasions",value:function(){var e=this;return h(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Z.fetchAll();case 3:n=t.sent,r=n.data.payload,e.setState({allOccasions:r.occasions}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},{key:"onCardFormUpdate",value:function(e){var t=e.card;this.setState((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}({},e,{currentCard:t})}))}},{key:"updateCard",value:function(){var e=this;return h(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.shop,n=e.state.currentCard,t.prev=2,t.next=5,f.Z.update(n._id,n);case 5:s.default.push("/cards"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log("Error at Create card handleSave ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))()}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentCard,r=t.allOccasions;return n?(0,o.jsxs)(i.T,{breadcrumbs:[{content:"Back to Card Designs",onAction:function(){return s.default.push({pathname:"/cards"})}}],children:[(0,o.jsx)(u.Z,{title:"Edit",sectioned:!0,children:(0,o.jsx)(d.Z,{data:n,allOccasions:r,onUpdate:this.onCardFormUpdate.bind(this)})}),(0,o.jsx)("div",{style:{marginTop:20},children:(0,o.jsx)(l.Q,{primaryAction:{content:"Update",onAction:function(){return e.updateCard()}}})})]}):null}}],n&&b(t.prototype,n),r&&b(t,r),m}(c.Component);C.getInitialProps=function(){var e=h(a().mark((function e(t){var n,r,o,c,i,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.req,r=t.query,e.prev=1,o=r.id,!!n&&(new Request).setHeader("cookie",n.headers.cookie),e.next=7,f.Z.fetchSingle(o);case 7:return c=e.sent,i=c.data,u=i.payload.card,e.abrupt("return",{id:o,card:u});case 13:return e.prev=13,e.t0=e.catch(1),console.error("CardsEdit.getInitialProps ",e.t0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),t.default=C}}]);